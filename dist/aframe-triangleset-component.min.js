!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){function n(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,s=t?t.length:0;i<s;i+=3)n=new THREE.Vector3(+t[i+0],+t[i+1],+t[i+2]),r.push(n);return r}function i(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,s=t?t.length:0;i<s;i+=3)n=new THREE.Face3(+t[i+0],+t[i+1],+t[i+2]),r.push(n);return r}function s(e){if("object"==typeof e)return e;for(var t=e.match(/([+\-0-9eE\.]+)/g),r=[],n={},i=0,s=t?t.length:0;i<s;i+=2)n=new THREE.Vector2(+t[i+0],+t[i+1]),r.push(n);return r}function o(e,t){e.vertices.forEach(function(r,n){var i=t.vertices[n];e.vertices[n].set(i.x,i.y,i.z)}),e.computeBoundingBox()}function a(e,t,r){var n=new THREE.Geometry;if(n.vertices=e.vertices,n.computeBoundingBox(),0==e.triangles.length){for(var i=u(n),s=c(e,i),o=t.x[s],a=t.y[s],f=e.vertices.map(function(e){return[e[o]+0,e[a]+0]}),g=l.triangulate(f),h=0;h<g.length;h+=3)n.faces.push(new THREE.Face3(g[h],g[h+1],g[h+2]));return n}return n.faces=e.triangles,n}function u(e){var t=e.boundingBox,r=t.max.clone();return r.sub(t.min),r}function c(e,t){var r=e.projectdir.toLowerCase();return"x"!==r&&"y"!==r&&"z"!==r&&(r="z",t.x<t.y&&t.x<t.z&&(r="x"),t.y<t.x&&t.y<t.z&&(r="y")),r}function f(e,t,r){var n=e.uvs;if(n.length>0){for(var i=+n.length,s=i;s<t.vertices.length;s++)n.push(n[i].clone);return n}var o=u(t),a=c(e,o),f=r.x[a],l=r.y[a],g=t.vertices,h=t.boundingBox,p=h.min[f],m=h.min[l],v=[];return g.forEach(function(e){v.push(new THREE.Vector2((e[f]-p)/o[f],(e[l]-m)/o[l]))}),v}if("undefined"==typeof AFRAME)throw new Error("Geometry attempted to register before AFRAME was available.");var l=r(1);AFRAME.registerGeometry("triangleset",{schema:{vertices:{default:[{x:-.5,y:0,z:.5},{x:.5,y:0,z:.5},{x:.5,y:0,z:-.5},{x:-.5,y:0,z:-.5}],parse:function(e){return n(e)},stringify:function(e){return e.map(AFRAME.utils.coordinates.stringify).join(",")}},triangles:{default:[],parse:function(e){return i(e)},stringify:function(e){return e.map(function(e){return{x:e.a,y:e.b,z:e.c}}).map(AFRAME.utils.coordinates.stringify).join(",")}},uvs:{default:[],parse:function(e){return s(e)},stringify:function(e){return e.map(function(e){return"object"!=typeof e?e:[e.x,e.y].join(" ")}).join(",")}},projectdir:{type:"string",default:"auto"}},init:function(e){this.dmaps={x:{x:"y",y:"x",z:"x"},y:{x:"z",y:"z",z:"y"}};var t=this.geometry=a(e,this.dmaps,!0);t.faceVertexUvs[0]=[];var r=t.faces,n=f(e,t,this.dmaps);r.forEach(function(e,r){t.faceVertexUvs[0].push([n[e.a],n[e.b],n[e.c]])}),t.uvsNeedUpdate=!0,t.mergeVertices(),t.computeFaceNormals(),t.computeVertexNormals(),t.verticesNeedUpdate=!0},update:function(e){e=e||{};var t=this.data,r=AFRAME.utils.diff(e,t),n=this.el.getOrCreateObject3D("mesh",THREE.Mesh),i=this.system.getOrCreateGeometry(t),s=!(1===Object.keys(r).length&&("translate"in r||"uvs"in r)),u=t.vertices.length==i.vertices.length&&t.triangles.length==i.faces.length,c=t.vertices.length!==i.vertices.length||t.triangles.length!==i.faces.length,l="uvs"in r||c;if(s)if(u)o(i,t);else{this.system.unuseGeometry(e),n.geometry.dispose(),n.geometry=null;var g=n.material;this.geometry=a(this.data,this.dmaps,c),n=new THREE.Mesh(i,g),this.el.setObject3D("mesh",n)}if(l){i.faceVertexUvs[0]=[];var h=i.faces,p=f(t,i,this.dmaps);h.forEach(function(e,t){i.faceVertexUvs[0].push([p[e.a],p[e.b],p[e.c]])}),i.uvsNeedUpdate=!0}t.mergeTo&&this.mergeTo(t.mergeTo),i.mergeVertices(),i.computeFaceNormals(),i.computeVertexNormals(),i.verticesNeedUpdate=!0}});var g=AFRAME.utils.extendDeep,h=AFRAME.primitives.getMeshMixin();AFRAME.registerPrimitive("a-triangleset",g({},h,{defaultComponents:{geometry:{primitive:"triangleset"}},mappings:{vertices:"geometry.vertices",triangles:"geometry.triangles",uvs:"geometry.uvs",projectdir:"geometry.projectdir"}}))},function(e,t,r){var n;!function(){"use strict";function t(e){var t,r,n,i,s,o,a=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY;for(t=e.length;t--;)e[t][0]<a&&(a=e[t][0]),e[t][0]>c&&(c=e[t][0]),e[t][1]<u&&(u=e[t][1]),e[t][1]>f&&(f=e[t][1]);return r=c-a,n=f-u,i=Math.max(r,n),s=a+.5*r,o=u+.5*n,[[s-20*i,o-i],[s,o+20*i],[s+20*i,o-i]]}function r(e,t,r,n){var i,o,a,u,c,f,l,g,h,p,m=e[t][0],v=e[t][1],y=e[r][0],d=e[r][1],x=e[n][0],E=e[n][1],b=Math.abs(v-d),N=Math.abs(d-E);if(b<s&&N<s)throw new Error("Eek! Coincident points!");return b<s?(u=-((x-y)/(E-d)),f=(y+x)/2,g=(d+E)/2,i=(y+m)/2,o=u*(i-f)+g):N<s?(a=-((y-m)/(d-v)),c=(m+y)/2,l=(v+d)/2,i=(x+y)/2,o=a*(i-c)+l):(a=-((y-m)/(d-v)),u=-((x-y)/(E-d)),c=(m+y)/2,f=(y+x)/2,l=(v+d)/2,g=(d+E)/2,i=(a*c-u*f+g-l)/(a-u),o=b>N?a*(i-c)+l:u*(i-f)+g),h=y-i,p=d-o,{i:t,j:r,k:n,x:i,y:o,r:h*h+p*p}}function i(e){var t,r,n,i,s,o;for(r=e.length;r;)for(i=e[--r],n=e[--r],t=r;t;)if(o=e[--t],s=e[--t],n===s&&i===o||n===o&&i===s){e.splice(r,2),e.splice(t,2);break}}var s=1/1048576;n={triangulate:function(e,n){var o,a,u,c,f,l,g,h,p,m,v,y,d=e.length;if(d<3)return[];if(e=e.slice(0),n)for(o=d;o--;)e[o]=e[o][n];for(u=new Array(d),o=d;o--;)u[o]=o;for(u.sort(function(t,r){return e[r][0]-e[t][0]}),c=t(e),e.push(c[0],c[1],c[2]),f=[r(e,d+0,d+1,d+2)],l=[],g=[],o=u.length;o--;g.length=0){for(y=u[o],a=f.length;a--;)h=e[y][0]-f[a].x,h>0&&h*h>f[a].r?(l.push(f[a]),f.splice(a,1)):(p=e[y][1]-f[a].y,h*h+p*p-f[a].r>s||(g.push(f[a].i,f[a].j,f[a].j,f[a].k,f[a].k,f[a].i),f.splice(a,1)));for(i(g),a=g.length;a;)v=g[--a],m=g[--a],f.push(r(e,m,v,y))}for(o=f.length;o--;)l.push(f[o]);for(f.length=0,o=l.length;o--;)l[o].i<d&&l[o].j<d&&l[o].k<d&&f.push(l[o].i,l[o].j,l[o].k);return f},contains:function(e,t){if(t[0]<e[0][0]&&t[0]<e[1][0]&&t[0]<e[2][0]||t[0]>e[0][0]&&t[0]>e[1][0]&&t[0]>e[2][0]||t[1]<e[0][1]&&t[1]<e[1][1]&&t[1]<e[2][1]||t[1]>e[0][1]&&t[1]>e[1][1]&&t[1]>e[2][1])return null;var r=e[1][0]-e[0][0],n=e[2][0]-e[0][0],i=e[1][1]-e[0][1],s=e[2][1]-e[0][1],o=r*s-n*i;if(0===o)return null;var a=(s*(t[0]-e[0][0])-n*(t[1]-e[0][1]))/o,u=(r*(t[1]-e[0][1])-i*(t[0]-e[0][0]))/o;return a<0||u<0||a+u>1?null:[a,u]}},e.exports=n}()}]);